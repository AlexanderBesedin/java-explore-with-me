# ExploreWithMe
### Бэкенд микросервисного приложения для публикации мероприятий и поиска единомышленников для совместного их посещения
> ### Технологии:
> ### SpringBoot | Spring Data JPA | Hibernate | Maven | Lombok |
> ### PostgreSQL | Docker | REST API | Swagger

### Архитектура приложения
Приложение состоит из:
- Основного сервиса `ewm-service`, содержащего базовую логику приложения с разделением API на:
   - **публичную**, которая доступна без регистрации любому пользователю сети;
   - **закрытую**, которая доступна только авторизованным пользователям;
   - **административную** — только для администраторов сервиса.
- Сервиса статистики `stats-service`:
  - записывающего информацию о запросах к эндпоинтам API основного сервиса `GET /events` и `GET /events/{id}`;
  - предоставляющего статистику за выбранные даты по выбранному эндпоинту.

Каждый из сервисов приложения и их базы данных PostgreSQL запускаются в своем Docker-контейнере, 
взаимодействие которых настроено через Docker Compose.<br> Настройки развёртывания контейнеров выполнены в файле 
[docker-compose.yml](docker-compose.yml) в корне проекта.

### Функционал API основного сервиса `ewm-service`

<details>
<summary><b>В публичном API доступно:</b></summary>

- получение списка событий с краткой информацией о мероприятиях, сортированных либо по количеству просмотров, 
запрашиваемых в сервисе статистики, либо по датам событий;
- получение подробной информации о конкретном событии с указанной категорией;
- получение всех имеющихся категорий и подборок событий, составленными администраторами ресурса;
<br><br>Каждый публичный запрос для получения списка событий или полной информации о мероприятии фиксируется сервисом статистики.
</details>

<details>
<summary><b>В закрытом API авторизованным пользователям доступно:</b></summary>

- добавлять в приложение новые мероприятия, редактировать их и просматривать после добавления;
- подавать заявки на участие в интересующих мероприятиях;
- подтверждать создателем мероприятия заявки, которые отправили другие пользователи сервиса;
- оставлять комментарии к мероприятию.
</details>

<details>
<summary><b>В административном API доступно:</b></summary>

- добавление, изменение и удаление категорий для мероприятий;
- добавление, удаление и закрепление на главной странице подборки мероприятий;
- модерация событий, размещённых пользователями, — публикация или отклонение;
- управление пользователями — добавление, активация, просмотр и удаление.
</details>

### Спецификации API приложения
Используя [онлайн-версию](https://editor-next.swagger.io/) Swagger вы можете ознакомиться со спецификациями приложения:
- спецификация основного сервиса `ewm-service`: [ewm-main-service-spec.json](ewm-main-service-spec.json);
- спецификация сервиса статистики `stats-service`: [ewm-stats-service-spec.json](ewm-stats-service-spec.json).

### Запуск и тестирование
<details>
<summary><b>Деплой и запуск приложения</b></summary>

1. Зайдите на [официальный сайт проекта Docker](https://www.docker.com/products/docker-desktop/), скачайте установочный файл
   для вашей операционной системы и установите Docker Desktop.
2. Выполните клонирование репозитория:
   - используя web URL: `https://github.com/AlexanderBesedin/java-explore-with-me.git`
   - используя SSH-ключ: `git@github.com:AlexanderBesedin/java-explore-with-me.git`
   - или просто скачайте zip-архив по [ссылке](https://github.com/AlexanderBesedin/java-explore-with-me/archive/refs/heads/main.zip).
3. Проверьте порты 8080, 9090, 6541, 6542 - они должны быть свободны от посторонних процессов.
4. В терминале IDE в корневой директории приложения выполните команду `mvn clean package` для создания jar-файлов сервисов приложения.
5. В терминале IDE в корневой директории приложения выполните команду `docker compose up`, которая соберет
   и запустит все контейнеры, определенные в файле `docker-compose.yml`:
   - `ewm_container` с сервисом `ewm-service` на портах 8080:8080;
   - `ewm_db` c базой данных PostgreSQL сервиса `ewm-service` на портах 6542:5432;
   - `stats_container` с сервером `stats-server` сервиса `stats-service` на портах 9090:9090;
   - `stats_db` c базой данных PostgreSQL сервиса `stats-service` на портах 6541:5432.
6. Для остановки работы приложения выполните команду `docker compose stop`, для повторного старта - `docker compose start`,
   для остановки и удаления контейнеров - `docker compose down`.
</details>

<details>
<summary><b>Тестирование приложения</b></summary>

Тестирование приложения реализовано API-тестами с использованием [json-коллекции](postman/feature.json)

Перед запуском API-тестов необходимо выполнить шаги 1-6 пункта **«Деплой и запуск приложения»**,
затем импортировать json-коллекцию в выбранном вами testAPI-клиенте и запустить тесты, **соблюдая их хронологический порядок**.
</details>

### Статус проекта
На данный момент проект завершен, возможен небольшой рефакторинг методов, структуры для приведения
в соответствие лучшим практикам.